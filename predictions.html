<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>Crypto Predictions</title>
</head>
<body>
    <header>
        <h1>Real-Time Bitcoin and Ethereum Predictions</h1>
        <nav>
            <ul>
                <li><a href="{{ url_for('home') }}">Home</a></li>
                <li><a href="{{ url_for('about') }}">About Me</a></li>
                <li><a href="{{ url_for('news') }}">News</a></li>
                <li><a href="{{ url_for('predictions') }}">Predictions</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="predictions">
            <h2>Market Predictions</h2>
            <div id="bitcoin-prediction">
                <h3>Bitcoin Prediction</h3>
                <p>Current Price: <span id="btc-price">Loading...</span></p>
                <canvas id="btc-chart"></canvas>
            </div>
            <div id="ethereum-prediction">
                <h3>Ethereum Prediction</h3>
                <p>Current Price: <span id="eth-price">Loading...</span></p>
                <canvas id="eth-chart"></canvas>
            </div>
        </section>
        <section id="market-map">
            <h2>Market Map</h2>
            <div id="market-map-container">Loading market map...</div>
        </section>
    </main>
    <footer>
        <p>&copy; 2023 Crypto Prediction. All rights reserved.</p>
    </footer>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Fetch historical data for charts
        async function fetchHistoricalData() {
            const response = await fetch('/historical-data');
            const data = await response.json();
            return data;
        }

        async function createCharts() {
            const data = await fetchHistoricalData();

            // Bitcoin Chart
            const btcCtx = document.getElementById('btc-chart').getContext('2d');
            new Chart(btcCtx, {
                type: 'line',
                data: {
                    labels: data.dates,
                    datasets: [{
                        label: 'Bitcoin Price (USD)',
                        data: data.btc_prices,
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        fill: true,
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Price in USD'
                            }
                        }
                    }
                }
            });

            // Ethereum Chart
            const ethCtx = document.getElementById('eth-chart').getContext('2d');
            new Chart(ethCtx, {
                type: 'line',
                data: {
                    labels: data.dates,
                    datasets: [{
                        label: 'Ethereum Price (USD)',
                        data: data.eth_prices,
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        fill: true,
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Price in USD'
                            }
                        }
                    }
                }
            });
        }

        // Call the function to create charts
        createCharts();
    </script>
</body>
</html>
